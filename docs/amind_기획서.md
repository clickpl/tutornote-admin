# [기획서] TutorNote Master Admin Phase 1: 통합 관제 및 법무 대응

**버전**: 1.0  
**작성일**: 2025-12-29  
**상태**: Phase 1 (운영 안정화 및 법적 준수)
**우선순위**: 지표 중심(Metric) > 데이터 증빙(Compliance) > CS 대응(Support)

---

## 1. 개요
TutorNote의 멀티테넌시 환경을 통합 관리하고, 외부 API(Gemini, 카카오) 비용 최적화 및 법적 리스크를 선제적으로 방어하기 위한 운영자 전용 시스템을 구축함.

---

## 2. [우선순위 1] 통합 관제 대시보드 (Operation Monitoring)
서비스의 성장 지표와 운영 원가(API 비용)를 실시간으로 감시하여 비즈니스 의사결정을 지원합니다.

### 2.1 핵심 지표 (Growth KPI)
* **전체 학원 현황**: 가입된 총 학원 수 및 활성 상태 모니터링.
* **사용자 및 학생 통계**: 전체 등록 학생 수 및 학원별 평균 학생 수.
* **콘텐츠 생산량**: 당일/주간/월간 단위 AI 피드백 생성 건수 및 카드뉴스 제작 건수.
* **출석부 활성도**: 키오스크 사용 빈도 및 등/하원 처리 건수.

### 2.2 API 및 인프라 건강도 (Health & Cost)
* **Gemini API 관제**: API 호출 성공률, 평균 응답 시간, 토큰 사용량 기반 비용 추적.
* **알림톡 발송 관제**: 카카오 비즈니스 채널 심사 상태 및 알림톡 발송 성공/실패 로그.
* **시스템 부하**: 이미지 생성(Pillow) 및 DB 쿼리 성능 모니터링.

---

## 3. [우선순위 2] 법무 및 개인정보보호 관제 (Compliance)
최근 구축된 법적 시스템을 기반으로 개인정보보호법 준수 여부를 증빙하고 데이터를 관리합니다.

### 3.1 동의 이력 관리 (Consent Logs)
* **약관 동의 로그**: 학원별(운영자) 이용약관 및 개인정보 처리방침 동의 버전, IP, 일시 기록 조회 (`user_consents` 연동).
* **제3자 제공 이력**: Gemini(AI) 및 카카오(알림톡)로 전송된 데이터 로그를 법적 근거로 보관.

### 3.2 아동 보호 시스템 (Child Protection)
* **보호자 동의 현황**: 만 14세 미만 학생의 보호자 동의 요청(`consent_requests`) 발송 및 완료 상태 실시간 추적.
* **기능 제한 관리**: 법적 미동의 학생에 대한 AI 리포트 생성 및 학부모 공유 기능의 기술적 차단 여부 검증.

### 3.3 데이터 파기 관리
* **탈퇴/파기 예약**: 회원 탈퇴 요청 시 연관된 모든 멀티테넌시 데이터의 즉시 파기 및 로그 기록.

---

## 4. [우선순위 3] 학원 관리 및 CS 지원 (Support)
원장님(사용자)의 기술적 문의를 해결하고 서비스 설정을 유연하게 지원합니다.

### 4.1 기술 지원 도구
* **대리 로그인 (Impersonation)**: 운영자가 특정 학원 대시보드에 접근하여 사용자 관점의 오류를 직접 확인 및 재현.
* **설정 강제 제어**: 학원 정보 수정, 출석번호 할당 방식(자동/뒤4자리) 변경 지원.

### 4.2 서비스 소통 관리
* **공지/FAQ 관리**: 앱 내 노출되는 공지사항 작성 및 카테고리별 FAQ 리스트업.
* **문의 응대**: 카카오톡 1:1 문의 연동 현황 및 응대 이력 관리.

---

## 5. 정보 구조 (IA) 요약

| 메뉴 | 주요 항목 | 관련 데이터 / API |
| :--- | :--- | :--- |
| **Dashboard** | KPI 요약, API 상태, 실시간 활동 피드 | Gemini, 카카오, 시스템 로그 |
| **Legal** | **동의 로그(`user_consents`), 보호자 동의(`consent_requests`)** | MySQL, 법무 DB |
| **Academies** | 학원 리스트, 상세 정보, **대리 로그인** | 멀티테넌시 DB |
| **Notifications** | 알림톡 심사 상태, 발송 이력, 템플릿 관리 | 카카오 알림톡 API |

---

# [UI Prototype] TutorNote Master Admin: 지표 중심 관제 대시보드

**버전**: 1.0 (2025-12-29 기준)
**사용자**: 운영자(제작자) 전용
**주요 목적**: 실시간 지표 모니터링, API 비용 관리, 법적 증빙 데이터 확인

---

## 1. 대시보드 레이아웃 (Wireframe)

```text
+------------------------------------------------------------------------------------------+
|  TutorNote Admin [Master]                                       [Search...] [Alerts] [Admin]  |
+------------------------------------------------------------------------------------------+
| (Menu)          |                                                                        |
| - Dashboard     |  [1. 핵심 지표 요약 (Summary)]                                             |
| - Academies     |  +------------+  +------------+  +------------+  +------------+        |
| - Legal Logs    |  | 누적 학원  |  | 누적 학생  |  | 오늘 리포트|  | 알림톡 잔액|        |
| - API/Cost      |  |    128     |  |   1,540    |  |     45     |  |  12,500원  |        |
| - Notifications |  +------------+  +------------+  +------------+  +------------+        |
| - Settings      |                                                                        |
|                 |  [2. 서비스 건강도 및 API 상태 (Health & Cost)]                             |
|                 |  +---------------------------+  +------------------------------------+ |
|                 |  | Gemini AI (피드백 생성)   |  | 카카오 비즈니스/알림톡              | |
|                 |  | - 성공률: [||||||||--] 92%|  | - 채널: 승인 완료                  | |
|                 |  | - 지연시간: 1.2s          |  | - 템플릿: 2건 심사 중              | |
|                 |  | - 이번 달 비용: $14.50    |  | - 오늘 발송: 210건 (성공률 100%)    | |
|                 |  +---------------------------+  +------------------------------------+ |
|                 |                                                                        |
|                 |  [3. 실시간 활동 및 법무 피드 (Activity & Compliance)]                     |
|                 |  +--------------------------------------------------------------------+ |
|                 |  | 시간  | 카테고리 | 활동 내용                              | 상태   | |
|                 |  |-------|----------|----------------------------------------|--------| |
|                 |  | 11:20 | 학원가입 | '클릭플 피아노' (약관 Ver 1.2 동의)    | 완료   | |
|                 |  | 11:15 | 보호자동의| '김OO' 학생 보호자 동의 요청 발송      | 대기   | |
|                 |  | 11:05 | AI 리포트 | '이OO' 학생 피드백 생성 (토큰 420)     | 성공   | |
|                 |  +--------------------------------------------------------------------+ |
+------------------------------------------------------------------------------------------+

## 2. 섹션별 상세 UI/UX 기획

### 2.1 [우선순위 1] 핵심 지표 섹션 (Summary)
데이터 근거: 가입된 전체 학원 수와 학생 데이터 총합을 시각화합니다.

오늘 리포트: 당일 생성된 AI 피드백 및 카드뉴스 이미지 생성량을 실시간 집계하여 서비스 활성도를 측정합니다.

알림톡 잔액: 카카오 API 연동 상태 및 발송 가능 잔액을 표시하여 운영 중단을 방지합니다.

### 2.2 [우선순위 2] API 및 건강도 섹션 (Health & Cost)
Gemini 관제: AI 피드백 생성의 성공률과 평균 응답 속도를 모니터링하여 기술적 안정성을 확보합니다.

비용 추적: Gemini API 사용 토큰량을 기반으로 예상 비용을 산출하여 운영 원가를 관리합니다.

카카오 심사: 현재 심사 대기 중인 채널 및 템플릿의 상태를 운영자가 즉시 인지하도록 배치합니다.

### 2.3 [우선순위 3] 법무 및 활동 피드 (Compliance Feed)
동의 로그 확인: 신규 가입자가 이용약관 및 개인정보 처리방침(Ver 1.2 등)에 동의한 시점과 IP를 실시간으로 노출합니다 (user_consents 기반).

보호자 동의 추적: 만 14세 미만 학생 등록 시 발생하는 보호자 동의 요청(consent_requests) 상태를 모니터링하여 법적 미비 사항을 관리합니다.

활동 이력: 리포트 생성, 출석 체크 등 주요 이벤트가 발생할 때마다 피드 형태로 업데이트되어 서비스의 '살아있음'을 확인합니다.


## 3. 운영자 경험(OX) 최적화 포인트

### 다크 모드 제공: 운영자가 야간에도 장시간 관제할 수 있도록 눈의 피로를 줄이는 다크 테마를 기본 고려합니다.

### 실시간 알림(Toast): Gemini API 500 에러나 카카오 알림톡 발송 실패율이 10%를 넘을 경우, 대시보드 상단에 붉은색 경고바를 즉시 띄웁니다.

### 개인정보 보호: 대시보드 상의 학생 이름 및 전화번호는 기본적으로 마스킹(김*O) 처리하며, 운영자가 별도 클릭 시에만 확인할 수 있도록 설계하여 보안 리스크를 줄입니다.