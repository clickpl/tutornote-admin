---
# [기획서] TutorNote Master Admin: 법무 동의 로그 상세 조회 페이지

**버전**: 1.0

**작성일**: 2025-12-29

**상태**: Phase 1 (법적 준수 및 증빙 강화)

**우선순위**: 데이터 증빙 중심 (Compliance Evidence)

---

## 1. 개요

본 페이지는 학원 운영자(원장) 및 학생 보호자의 법적 동의 이력을 상세히 추적하고 관리합니다. AI 서비스 제공을 위한 데이터 국외 이전 동의 및 만 14세 미만 아동의 보호자 동의 여부를 시각화하여 운영 리스크를 최소화하는 데 목적이 있습니다.

---

## 2. 화면 설계 (Wireframe)

```text
+--------------------------------------------------------------------------------------------+
|  TutorNote Admin > 법무 관리 > 동의 로그 상세 조회                                         |
+--------------------------------------------------------------------------------------------+
| [ 검색 및 필터 ]                                                                           |
| 학원명: [__________]  유형: [전체/원장/보호자]  상태: [전체/동의완료/철회]  [검색]         |
+--------------------------------------------------------------------------------------------+
|                                                                                            |
| [ 섹션 A: 학원 운영자(원장) 약관 동의 이력 ]                                               |
| +----------------------------------------------------------------------------------------+ |
| | 학원 ID | 학원명        | 동의 유형     | 약관 버전 | 동의 일시 (KST)    | 접속 IP        | |
| |---------|---------------|---------------|-----------|--------------------|----------------| |
| | AC-001  | 클릭플 피아노 | 서비스 이용   | v1.2      | 2025-12-28 14:20:05 | 211.xxx.xxx.xx | |
| | AC-001  | 클릭플 피아노 | 개인정보 처리 | v1.2      | 2025-12-28 14:20:05 | 211.xxx.xxx.xx | |
| | AC-005  | 한성용의 학원 | AI 국외 이전  | v1.0      | 2025-12-29 09:30:12 | 118.xxx.xxx.xx | |
| +----------------------------------------------------------------------------------------+ |
|                                                                                            |
| [ 섹션 B: 보호자 동의(만 14세 미만 아동) 현황 ]                                             |
| +----------------------------------------------------------------------------------------+ |
| | 학생명 | 학원명        | 보호자 연락처 | 요청 일시          | 동의 상태 | 최종 확인 일시 | |
| |--------|---------------|---------------|--------------------|-----------|----------------| |
| | 김OO   | 클릭플 피아노 | 010-****-1234 | 2025-12-29 10:00 | [동의완료]| 2025-12-29 10:30| |
| | 이OO   | 한성용의 학원 | 010-****-5678 | 2025-12-29 11:20 | [대기중]  | -              | |
| +----------------------------------------------------------------------------------------+ |
+--------------------------------------------------------------------------------------------+

```

---

## 3. 상세 기능 명세

### 3.1 검색 및 필터링

* **학원명/ID 검색**: 특정 테넌트의 동의 이력을 빠르게 추출합니다.
* **동의 유형 필터**: 이용약관, 개인정보처리방침, 제3자(AI) 제공 동의, 아동 보호 동의 등 카테고리별로 구분하여 조회합니다.
* **기간 검색**: 약관 개정 시점 전후의 동의 데이터를 확인하기 위한 날짜 범위 설정 기능을 제공합니다.

### 3.2 학원장 동의 로그 (Table: `user_consents`)

* **데이터 근거**: 회원가입 시 또는 약관 개정 시 수집된 원장님의 동의 로그를 표시합니다.
* **약관 버전 관리**: 동의 당시의 약관 버전(`v1.2` 등)을 명시하여, 특정 시점의 면책 조항 적용 여부를 판단합니다.
* **IP 주소 기록**: 동의 주체의 본인 여부 확인 및 보안 증빙을 위해 동의 당시의 IP 주소를 함께 관리합니다.

### 3.3 보호자 동의 관리 (Table: `consent_requests`)

* **데이터 근거**: 만 14세 미만 학생 등록 시 발송되는 알림톡 기반 동의 요청 이력을 관리합니다.
* **진행 상태 추적**: 알림톡 발송 성공 여부, 보호자 페이지 접속 여부, 최종 동의 여부를 실시간으로 추적합니다.
* **기능 제한 연동**: 보호자 미동의 학생에 대해 AI 리포트 생성 및 학부모 공유 기능이 시스템적으로 차단되어 있는지 검증합니다.

---

## 4. 데이터베이스 및 법적 연동

* **동의 로그 API**: `GET /api/admin/consents` 엔드포인트를 통해 `user_consents`와 `consent_requests` 테이블의 데이터를 통합 호출합니다.
* **전문 보기**: 각 로그 옆에 [약관보기] 버튼을 배치하여, 해당 버전의 약관 전문을 운영자가 즉시 확인할 수 있도록 합니다.
* **엑셀 추출**: 외부 감사 또는 법적 자료 제출 시 활용할 수 있도록 필터링된 리스트를 CSV/Excel 형식으로 다운로드하는 기능을 제공합니다.

---

## 5. 운영자 경험(OX) 최적화 포인트

* **개인정보 마스킹**: 보호자 연락처 및 학생 이름은 기본적으로 마스킹 처리하여 운영자의 개인정보 오남용 리스크를 방지합니다.
* **동의 재요청**: '보호자 동의 대기' 상태가 길어지는 경우, 관리자가 원장님을 대신해 동의 요청 알림톡을 재발송할 수 있는 기능을 제공합니다.
* **동의 로그 불변성**: 저장된 동의 로그는 운영자라 하더라도 수정이나 삭제가 불가능하도록 읽기 전용(Read-only)으로 설계하여 증빙력을 높입니다.

---

**운영자님, 위 법무 페이지 기획서가 현재 구축하신 시스템 구조와 잘 맞으신가요?**
